/*
  angular-md5 - v0.1.8 
  2015-11-17
*/

/* commonjs package manager support (eg componentjs) */
if (typeof module !== "undefined" && typeof exports !== "undefined" && module.exports === exports) {
	module.exports = "angular-md5";
}
(function(angular) {
	angular.module("angular-md5", ["gdi2290.md5"]);
	angular.module("ngMd5", ["gdi2290.md5"]);
	angular.module("gdi2290.md5", ["gdi2290.gravatar-filter", "gdi2290.md5-service", "gdi2290.md5-filter"]);
	"use strict";
	angular.module("gdi2290.gravatar-filter", []).filter("gravatar", ["md5",
		function(md5) {
			var cache = {};
			return function(text, defaultText) {
				if (!cache[text]) {
					defaultText = defaultText ? md5.createHash(defaultText.toString().toLowerCase()) : "";
					cache[text] = text ? md5.createHash(text.toString().toLowerCase()) : defaultText;
				}
				return cache[text];
			};
		}
	]);
	"use strict";
	angular.module("gdi2290.md5-filter", []).filter("md5", ["md5",
		function(md5) {
			return function(text) {
				return text ? md5.createHash(text.toString().toLowerCase()) : text;
			};
		}
	]);
	"use strict";
	angular.module("gdi2290.md5-service", []).factory("md5", [
		function() {

			function hex_md5(a) {
				if (a == "") return a;
				return rstr2hex(rstr_md5(str2rstr_utf8(a)))
			}

			function hex_hmac_md5(a, b) {
				return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a), str2rstr_utf8(b)))
			}

			function md5_vm_test() {
				return hex_md5("abc").toLowerCase() == "900150983cd24fb0d6963f7d28e17f72"
			}

			function rstr_md5(a) {
				return binl2rstr(binl_md5(rstr2binl(a), a.length * 8))
			}

			function rstr_hmac_md5(c, f) {
				var e = rstr2binl(c);
				if (e.length > 16) {
					e = binl_md5(e, c.length * 8)
				}
				var a = Array(16),
					d = Array(16);
				for (var b = 0; b < 16; b++) {
					a[b] = e[b] ^ 909522486;
					d[b] = e[b] ^ 1549556828
				}
				var g = binl_md5(a.concat(rstr2binl(f)), 512 + f.length * 8);
				return binl2rstr(binl_md5(d.concat(g), 512 + 128))
			}

			function rstr2hex(c) {
				try {
					hexcase
				} catch (g) {
					hexcase = 0
				}
				var f = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
				var b = "";
				var a;
				for (var d = 0; d < c.length; d++) {
					a = c.charCodeAt(d);
					b += f.charAt((a >>> 4) & 15) + f.charAt(a & 15)
				}
				return b
			}

			function str2rstr_utf8(c) {
				var b = "";
				var d = -1;
				var a, e;
				while (++d < c.length) {
					a = c.charCodeAt(d);
					e = d + 1 < c.length ? c.charCodeAt(d + 1) : 0;
					if (55296 <= a && a <= 56319 && 56320 <= e && e <= 57343) {
						a = 65536 + ((a & 1023) << 10) + (e & 1023);
						d++
					}
					if (a <= 127) {
						b += String.fromCharCode(a)
					} else {
						if (a <= 2047) {
							b += String.fromCharCode(192 | ((a >>> 6) & 31), 128 | (a & 63))
						} else {
							if (a <= 65535) {
								b += String.fromCharCode(224 | ((a >>> 12) & 15), 128 | ((a >>> 6) & 63), 128 | (a & 63))
							} else {
								if (a <= 2097151) {
									b += String.fromCharCode(240 | ((a >>> 18) & 7), 128 | ((a >>> 12) & 63), 128 | ((a >>> 6) & 63), 128 | (a & 63))
								}
							}
						}
					}
				}
				return b
			}

			function rstr2binl(b) {
				var a = Array(b.length >> 2);
				for (var c = 0; c < a.length; c++) {
					a[c] = 0
				}
				for (var c = 0; c < b.length * 8; c += 8) {
					a[c >> 5] |= (b.charCodeAt(c / 8) & 255) << (c % 32)
				}
				return a
			}

			function binl2rstr(b) {
				var a = "";
				for (var c = 0; c < b.length * 32; c += 8) {
					a += String.fromCharCode((b[c >> 5] >>> (c % 32)) & 255)
				}
				return a
			}

			function binl_md5(p, k) {
				p[k >> 5] |= 128 << ((k) % 32);
				p[(((k + 64) >>> 9) << 4) + 14] = k;
				var o = 1732584193;
				var n = -271733879;
				var m = -1732584194;
				var l = 271733878;
				for (var g = 0; g < p.length; g += 16) {
					var j = o;
					var h = n;
					var f = m;
					var e = l;
					o = md5_ff(o, n, m, l, p[g + 0], 7, -680876936);
					l = md5_ff(l, o, n, m, p[g + 1], 12, -389564586);
					m = md5_ff(m, l, o, n, p[g + 2], 17, 606105819);
					n = md5_ff(n, m, l, o, p[g + 3], 22, -1044525330);
					o = md5_ff(o, n, m, l, p[g + 4], 7, -176418897);
					l = md5_ff(l, o, n, m, p[g + 5], 12, 1200080426);
					m = md5_ff(m, l, o, n, p[g + 6], 17, -1473231341);
					n = md5_ff(n, m, l, o, p[g + 7], 22, -45705983);
					o = md5_ff(o, n, m, l, p[g + 8], 7, 1770035416);
					l = md5_ff(l, o, n, m, p[g + 9], 12, -1958414417);
					m = md5_ff(m, l, o, n, p[g + 10], 17, -42063);
					n = md5_ff(n, m, l, o, p[g + 11], 22, -1990404162);
					o = md5_ff(o, n, m, l, p[g + 12], 7, 1804603682);
					l = md5_ff(l, o, n, m, p[g + 13], 12, -40341101);
					m = md5_ff(m, l, o, n, p[g + 14], 17, -1502002290);
					n = md5_ff(n, m, l, o, p[g + 15], 22, 1236535329);
					o = md5_gg(o, n, m, l, p[g + 1], 5, -165796510);
					l = md5_gg(l, o, n, m, p[g + 6], 9, -1069501632);
					m = md5_gg(m, l, o, n, p[g + 11], 14, 643717713);
					n = md5_gg(n, m, l, o, p[g + 0], 20, -373897302);
					o = md5_gg(o, n, m, l, p[g + 5], 5, -701558691);
					l = md5_gg(l, o, n, m, p[g + 10], 9, 38016083);
					m = md5_gg(m, l, o, n, p[g + 15], 14, -660478335);
					n = md5_gg(n, m, l, o, p[g + 4], 20, -405537848);
					o = md5_gg(o, n, m, l, p[g + 9], 5, 568446438);
					l = md5_gg(l, o, n, m, p[g + 14], 9, -1019803690);
					m = md5_gg(m, l, o, n, p[g + 3], 14, -187363961);
					n = md5_gg(n, m, l, o, p[g + 8], 20, 1163531501);
					o = md5_gg(o, n, m, l, p[g + 13], 5, -1444681467);
					l = md5_gg(l, o, n, m, p[g + 2], 9, -51403784);
					m = md5_gg(m, l, o, n, p[g + 7], 14, 1735328473);
					n = md5_gg(n, m, l, o, p[g + 12], 20, -1926607734);
					o = md5_hh(o, n, m, l, p[g + 5], 4, -378558);
					l = md5_hh(l, o, n, m, p[g + 8], 11, -2022574463);
					m = md5_hh(m, l, o, n, p[g + 11], 16, 1839030562);
					n = md5_hh(n, m, l, o, p[g + 14], 23, -35309556);
					o = md5_hh(o, n, m, l, p[g + 1], 4, -1530992060);
					l = md5_hh(l, o, n, m, p[g + 4], 11, 1272893353);
					m = md5_hh(m, l, o, n, p[g + 7], 16, -155497632);
					n = md5_hh(n, m, l, o, p[g + 10], 23, -1094730640);
					o = md5_hh(o, n, m, l, p[g + 13], 4, 681279174);
					l = md5_hh(l, o, n, m, p[g + 0], 11, -358537222);
					m = md5_hh(m, l, o, n, p[g + 3], 16, -722521979);
					n = md5_hh(n, m, l, o, p[g + 6], 23, 76029189);
					o = md5_hh(o, n, m, l, p[g + 9], 4, -640364487);
					l = md5_hh(l, o, n, m, p[g + 12], 11, -421815835);
					m = md5_hh(m, l, o, n, p[g + 15], 16, 530742520);
					n = md5_hh(n, m, l, o, p[g + 2], 23, -995338651);
					o = md5_ii(o, n, m, l, p[g + 0], 6, -198630844);
					l = md5_ii(l, o, n, m, p[g + 7], 10, 1126891415);
					m = md5_ii(m, l, o, n, p[g + 14], 15, -1416354905);
					n = md5_ii(n, m, l, o, p[g + 5], 21, -57434055);
					o = md5_ii(o, n, m, l, p[g + 12], 6, 1700485571);
					l = md5_ii(l, o, n, m, p[g + 3], 10, -1894986606);
					m = md5_ii(m, l, o, n, p[g + 10], 15, -1051523);
					n = md5_ii(n, m, l, o, p[g + 1], 21, -2054922799);
					o = md5_ii(o, n, m, l, p[g + 8], 6, 1873313359);
					l = md5_ii(l, o, n, m, p[g + 15], 10, -30611744);
					m = md5_ii(m, l, o, n, p[g + 6], 15, -1560198380);
					n = md5_ii(n, m, l, o, p[g + 13], 21, 1309151649);
					o = md5_ii(o, n, m, l, p[g + 4], 6, -145523070);
					l = md5_ii(l, o, n, m, p[g + 11], 10, -1120210379);
					m = md5_ii(m, l, o, n, p[g + 2], 15, 718787259);
					n = md5_ii(n, m, l, o, p[g + 9], 21, -343485551);
					o = safe_add(o, j);
					n = safe_add(n, h);
					m = safe_add(m, f);
					l = safe_add(l, e)
				}
				return Array(o, n, m, l)
			}

			function md5_cmn(h, e, d, c, g, f) {
				return safe_add(bit_rol(safe_add(safe_add(e, h), safe_add(c, f)), g), d)
			}

			function md5_ff(g, f, k, j, e, i, h) {
				return md5_cmn((f & k) | ((~f) & j), g, f, e, i, h)
			}

			function md5_gg(g, f, k, j, e, i, h) {
				return md5_cmn((f & j) | (k & (~j)), g, f, e, i, h)
			}

			function md5_hh(g, f, k, j, e, i, h) {
				return md5_cmn(f ^ k ^ j, g, f, e, i, h)
			}

			function md5_ii(g, f, k, j, e, i, h) {
				return md5_cmn(k ^ (f | (~j)), g, f, e, i, h)
			}

			function safe_add(a, d) {
				var c = (a & 65535) + (d & 65535);
				var b = (a >> 16) + (d >> 16) + (c >> 16);
				return (b << 16) | (c & 65535)
			}

			function bit_rol(a, b) {
				return (a << b) | (a >>> (32 - b))
			};

			var md5 = {
				createHash: function(str) {
					if (null === str) {
						return null;
					}
					var xl;
					var rotateLeft = function(lValue, iShiftBits) {
						return lValue << iShiftBits | lValue >>> 32 - iShiftBits;
					};
					var addUnsigned = function(lX, lY) {
						var lX4, lY4, lX8, lY8, lResult;
						lX8 = lX & 2147483648;
						lY8 = lY & 2147483648;
						lX4 = lX & 1073741824;
						lY4 = lY & 1073741824;
						lResult = (lX & 1073741823) + (lY & 1073741823);
						if (lX4 & lY4) {
							return lResult ^ 2147483648 ^ lX8 ^ lY8;
						}
						if (lX4 | lY4) {
							if (lResult & 1073741824) {
								return lResult ^ 3221225472 ^ lX8 ^ lY8;
							} else {
								return lResult ^ 1073741824 ^ lX8 ^ lY8;
							}
						} else {
							return lResult ^ lX8 ^ lY8;
						}
					};
					var _F = function(x, y, z) {
						return x & y | ~x & z;
					};
					var _G = function(x, y, z) {
						return x & z | y & ~z;
					};
					var _H = function(x, y, z) {
						return x ^ y ^ z;
					};
					var _I = function(x, y, z) {
						return y ^ (x | ~z);
					};
					var _FF = function(a, b, c, d, x, s, ac) {
						a = addUnsigned(a, addUnsigned(addUnsigned(_F(b, c, d), x), ac));
						return addUnsigned(rotateLeft(a, s), b);
					};
					var _GG = function(a, b, c, d, x, s, ac) {
						a = addUnsigned(a, addUnsigned(addUnsigned(_G(b, c, d), x), ac));
						return addUnsigned(rotateLeft(a, s), b);
					};
					var _HH = function(a, b, c, d, x, s, ac) {
						a = addUnsigned(a, addUnsigned(addUnsigned(_H(b, c, d), x), ac));
						return addUnsigned(rotateLeft(a, s), b);
					};
					var _II = function(a, b, c, d, x, s, ac) {
						a = addUnsigned(a, addUnsigned(addUnsigned(_I(b, c, d), x), ac));
						return addUnsigned(rotateLeft(a, s), b);
					};
					var convertToWordArray = function(str) {
						var lWordCount;
						var lMessageLength = str.length;
						var lNumberOfWords_temp1 = lMessageLength + 8;
						var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;
						var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;
						var lWordArray = new Array(lNumberOfWords - 1);
						var lBytePosition = 0;
						var lByteCount = 0;
						while (lByteCount < lMessageLength) {
							lWordCount = (lByteCount - lByteCount % 4) / 4;
							lBytePosition = lByteCount % 4 * 8;
							lWordArray[lWordCount] = lWordArray[lWordCount] | str.charCodeAt(lByteCount) << lBytePosition;
							lByteCount++;
						}
						lWordCount = (lByteCount - lByteCount % 4) / 4;
						lBytePosition = lByteCount % 4 * 8;
						lWordArray[lWordCount] = lWordArray[lWordCount] | 128 << lBytePosition;
						lWordArray[lNumberOfWords - 2] = lMessageLength << 3;
						lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;
						return lWordArray;
					};
					var wordToHex = function(lValue) {
						var wordToHexValue = "",
							wordToHexValue_temp = "",
							lByte, lCount;
						for (lCount = 0; lCount <= 3; lCount++) {
							lByte = lValue >>> lCount * 8 & 255;
							wordToHexValue_temp = "0" + lByte.toString(16);
							wordToHexValue = wordToHexValue + wordToHexValue_temp.substr(wordToHexValue_temp.length - 2, 2);
						}
						return wordToHexValue;
					};
					var x = [],
						k, AA, BB, CC, DD, a, b, c, d, S11 = 7,
						S12 = 12,
						S13 = 17,
						S14 = 22,
						S21 = 5,
						S22 = 9,
						S23 = 14,
						S24 = 20,
						S31 = 4,
						S32 = 11,
						S33 = 16,
						S34 = 23,
						S41 = 6,
						S42 = 10,
						S43 = 15,
						S44 = 21;
					x = convertToWordArray(str);
					a = 1732584193;
					b = 4023233417;
					c = 2562383102;
					d = 271733878;
					xl = x.length;
					for (k = 0; k < xl; k += 16) {
						AA = a;
						BB = b;
						CC = c;
						DD = d;
						a = _FF(a, b, c, d, x[k + 0], S11, 3614090360);
						d = _FF(d, a, b, c, x[k + 1], S12, 3905402710);
						c = _FF(c, d, a, b, x[k + 2], S13, 606105819);
						b = _FF(b, c, d, a, x[k + 3], S14, 3250441966);
						a = _FF(a, b, c, d, x[k + 4], S11, 4118548399);
						d = _FF(d, a, b, c, x[k + 5], S12, 1200080426);
						c = _FF(c, d, a, b, x[k + 6], S13, 2821735955);
						b = _FF(b, c, d, a, x[k + 7], S14, 4249261313);
						a = _FF(a, b, c, d, x[k + 8], S11, 1770035416);
						d = _FF(d, a, b, c, x[k + 9], S12, 2336552879);
						c = _FF(c, d, a, b, x[k + 10], S13, 4294925233);
						b = _FF(b, c, d, a, x[k + 11], S14, 2304563134);
						a = _FF(a, b, c, d, x[k + 12], S11, 1804603682);
						d = _FF(d, a, b, c, x[k + 13], S12, 4254626195);
						c = _FF(c, d, a, b, x[k + 14], S13, 2792965006);
						b = _FF(b, c, d, a, x[k + 15], S14, 1236535329);
						a = _GG(a, b, c, d, x[k + 1], S21, 4129170786);
						d = _GG(d, a, b, c, x[k + 6], S22, 3225465664);
						c = _GG(c, d, a, b, x[k + 11], S23, 643717713);
						b = _GG(b, c, d, a, x[k + 0], S24, 3921069994);
						a = _GG(a, b, c, d, x[k + 5], S21, 3593408605);
						d = _GG(d, a, b, c, x[k + 10], S22, 38016083);
						c = _GG(c, d, a, b, x[k + 15], S23, 3634488961);
						b = _GG(b, c, d, a, x[k + 4], S24, 3889429448);
						a = _GG(a, b, c, d, x[k + 9], S21, 568446438);
						d = _GG(d, a, b, c, x[k + 14], S22, 3275163606);
						c = _GG(c, d, a, b, x[k + 3], S23, 4107603335);
						b = _GG(b, c, d, a, x[k + 8], S24, 1163531501);
						a = _GG(a, b, c, d, x[k + 13], S21, 2850285829);
						d = _GG(d, a, b, c, x[k + 2], S22, 4243563512);
						c = _GG(c, d, a, b, x[k + 7], S23, 1735328473);
						b = _GG(b, c, d, a, x[k + 12], S24, 2368359562);
						a = _HH(a, b, c, d, x[k + 5], S31, 4294588738);
						d = _HH(d, a, b, c, x[k + 8], S32, 2272392833);
						c = _HH(c, d, a, b, x[k + 11], S33, 1839030562);
						b = _HH(b, c, d, a, x[k + 14], S34, 4259657740);
						a = _HH(a, b, c, d, x[k + 1], S31, 2763975236);
						d = _HH(d, a, b, c, x[k + 4], S32, 1272893353);
						c = _HH(c, d, a, b, x[k + 7], S33, 4139469664);
						b = _HH(b, c, d, a, x[k + 10], S34, 3200236656);
						a = _HH(a, b, c, d, x[k + 13], S31, 681279174);
						d = _HH(d, a, b, c, x[k + 0], S32, 3936430074);
						c = _HH(c, d, a, b, x[k + 3], S33, 3572445317);
						b = _HH(b, c, d, a, x[k + 6], S34, 76029189);
						a = _HH(a, b, c, d, x[k + 9], S31, 3654602809);
						d = _HH(d, a, b, c, x[k + 12], S32, 3873151461);
						c = _HH(c, d, a, b, x[k + 15], S33, 530742520);
						b = _HH(b, c, d, a, x[k + 2], S34, 3299628645);
						a = _II(a, b, c, d, x[k + 0], S41, 4096336452);
						d = _II(d, a, b, c, x[k + 7], S42, 1126891415);
						c = _II(c, d, a, b, x[k + 14], S43, 2878612391);
						b = _II(b, c, d, a, x[k + 5], S44, 4237533241);
						a = _II(a, b, c, d, x[k + 12], S41, 1700485571);
						d = _II(d, a, b, c, x[k + 3], S42, 2399980690);
						c = _II(c, d, a, b, x[k + 10], S43, 4293915773);
						b = _II(b, c, d, a, x[k + 1], S44, 2240044497);
						a = _II(a, b, c, d, x[k + 8], S41, 1873313359);
						d = _II(d, a, b, c, x[k + 15], S42, 4264355552);
						c = _II(c, d, a, b, x[k + 6], S43, 2734768916);
						b = _II(b, c, d, a, x[k + 13], S44, 1309151649);
						a = _II(a, b, c, d, x[k + 4], S41, 4149444226);
						d = _II(d, a, b, c, x[k + 11], S42, 3174756917);
						c = _II(c, d, a, b, x[k + 2], S43, 718787259);
						b = _II(b, c, d, a, x[k + 9], S44, 3951481745);
						a = addUnsigned(a, AA);
						b = addUnsigned(b, BB);
						c = addUnsigned(c, CC);
						d = addUnsigned(d, DD);
					}
					var temp = wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d);
					return temp.toLowerCase();
				},
				hex_md5: hex_md5
			};
			return md5;
		}
	]);
})(angular);